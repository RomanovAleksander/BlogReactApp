(this["webpackJsonpblog-react-app"]=this["webpackJsonpblog-react-app"]||[]).push([[0],{40:function(t,e,n){t.exports=n(53)},49:function(t,e,n){},53:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(22),c=n.n(o),u=n(10),s=n(23),i=(n(49),n(3)),l=n(17),p=n(8),d=n(9),f=n(13),m=n(12),b=n(14),h=n(20),E=n.n(h),O="https://bloggy-api.herokuapp.com",v=new(function(){function t(){Object(p.a)(this,t),this.errObj=function(t,e){return{message:"Invalid request: ".concat(t,", status ").concat(e),status:e}}}return Object(d.a)(t,[{key:"fetchData",value:function(t,e){var n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.a.awrap(fetch("".concat(O).concat(t),e));case 2:if((n=r.sent).ok){r.next=5;break}throw this.errObj("".concat(O).concat(t),n.status);case 5:return r.abrupt("return",n.json());case 6:case"end":return r.stop()}}),null,this)}},{key:"get",value:function(t){return E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchData(t,{headers:{"Content-Type":"application/json"}}));case 1:case"end":return e.stop()}}),null,this)}},{key:"post",value:function(t,e){return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.fetchData(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));case 1:case"end":return n.stop()}}),null,this)}},{key:"update",value:function(t,e){return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.fetchData(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));case 1:case"end":return n.stop()}}),null,this)}},{key:"delete",value:function(t){return E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchData(t,{method:"DEL",headers:{"Content-Type":"application/json"}}));case 1:case"end":return e.stop()}}),null,this)}}]),t}()),y=function(t){return{type:"FORM_HAS_OPENED",payload:t}},C=n(4);function S(){var t=Object(i.a)(["\n  display: inline-block;\n  margin-left: 10px;\n  padding: 2px 3px 2px 3px;\n  max-height: 22px;\n  text-align: center;\n  vertical-align: middle;\n  border-radius: 5px;\n  background-color: darkgrey;\n  cursor: pointer;\n"]);return S=function(){return t},t}function j(){var t=Object(i.a)(["\n  display: flex;\n"]);return j=function(){return t},t}var g=C.a.div(j()),T=C.a.div(S()),_=function(t){var e=t.post,n=t.onView,r=e.title;return a.a.createElement(g,null,a.a.createElement("div",null,r),a.a.createElement(T,{onClick:n},"View"))};function F(){var t=Object(i.a)(["\n  text-align: center;\n"]);return F=function(){return t},t}var x=C.a.div(F()),k=function(){return a.a.createElement(x,null,"Ops... Something went wrong")};function w(){var t=Object(i.a)(["\n  margin-left: 40px;\n  margin-top: 5px;\n  width: 70px;\n"]);return w=function(){return t},t}function P(){var t=Object(i.a)(["\n  list-style: none;\n"]);return P=function(){return t},t}var U=C.a.li(P()),R=C.a.button(w()),H=function(t){var e=t.posts,n=t.onView;return a.a.createElement("ul",null,e.map((function(t){return a.a.createElement(U,{key:t.id},a.a.createElement(_,{post:t,onView:function(){return n(t.id)}}))})))},D=function(t){function e(){var t,n;Object(p.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).onCreate=function(){(0,n.props.openForm)()},n}return Object(b.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.postsRequested,n=t.postsLoaded,r=t.postsError;e(),v.get("/posts").then((function(t){return n(t)})).catch((function(t){r(t)}))}},{key:"render",value:function(){var t=this.props,e=t.posts,n=t.loading,r=t.onView,o=t.error;return n?a.a.createElement("div",null,"Loading..."):o?a.a.createElement(k,null):e?a.a.createElement(a.a.Fragment,null,a.a.createElement(R,{onClick:this.onCreate},"Create"),a.a.createElement(H,{onView:r,posts:e})):void 0}}]),e}(a.a.Component),A={postsLoaded:function(t){return{type:"FETCH_POSTS_SUCCESS",payload:t}},postsRequested:function(){return{type:"FETCH_POSTS_REQUEST"}},postsError:function(t){return{type:"FETCH_POSTS_FAILURE",payload:t}},openForm:y},I=Object(u.b)((function(t){return{posts:t.posts.posts,loading:t.posts.loading,error:t.posts.error}}),A)(D),L=Object(l.g)((function(t){var e=t.history;return a.a.createElement(I,{onView:function(t){e.push("/posts/".concat(t))}})})),M=n(2),B=function(t){function e(t){var n;return Object(p.a)(this,e),(n=Object(f.a)(this,Object(m.a)(e).call(this,t))).onBodyChange=function(t){n.setState({postId:n.props.postId,body:t.target.value})},n.onSubmit=function(t){t.preventDefault();var e=n.props.commentSuccess;v.post("/comments",Object(M.a)({},n.state)).then((function(t){e(t)})).catch((function(t){console.log(t)}))},n.default={postId:"",body:""},n.state=n.default,n}return Object(b.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this.props.comments,e=this.state.body;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("label",{htmlFor:"commentBody"},"Create comment: "),a.a.createElement("input",{type:"text",placeholder:"body",id:"commentBody",minLength:1,onChange:this.onBodyChange,value:e,required:!0}),a.a.createElement("button",{type:"submit"},"Create")),a.a.createElement("ol",null,a.a.createElement("b",null,"Comments:"),t.map((function(t){return a.a.createElement("li",{key:t.id},a.a.createElement("div",null,t.body))}))))}}]),e}(a.a.Component),q={commentSuccess:function(t){return{type:"COMMENT_SUCCESS",payload:t}}},N=Object(u.b)(null,q)(B);function V(){var t=Object(i.a)(["\n  display: flex;\n"]);return V=function(){return t},t}var J=C.a.div(V()),Q=function(t){function e(){var t,n;Object(p.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).onDelete=function(){var t=n.props,e=t.postId,r=t.postError;v.delete("/posts/".concat(e)).catch((function(t){r(t)}))},n.onUpdate=function(){var t=n.props;(0,t.openForm)(t.post)},n}return Object(b.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.postRequested,n=t.postLoaded,r=t.postError,a=t.postId;e(),v.get("/posts/".concat(a,"?_embed=comments")).then((function(t){n(t)})).catch((function(t){r(t)}))}},{key:"render",value:function(){var t=this.props,e=t.post,n=t.loading,r=t.error;if(n)return a.a.createElement("div",null,"Loading...");if(r)return a.a.createElement(k,null);if(e){var o=e.title,c=e.body,u=e.comments;return a.a.createElement(a.a.Fragment,null,a.a.createElement(J,null,a.a.createElement("div",null,a.a.createElement("b",null,o)),a.a.createElement("button",{onClick:this.onUpdate},"Update"),a.a.createElement("button",{onClick:this.onDelete},"Delete")),a.a.createElement("div",null,c),a.a.createElement(N,{comments:u,postId:e.id}))}}}]),e}(a.a.Component),z={postRequested:function(){return{type:"FETCH_POST_REQUEST"}},postLoaded:function(t){return{type:"FETCH_POST_SUCCESS",payload:t}},postError:function(t){return{type:"FETCH_POST_FAILURE",payload:t}},openForm:y},W=Object(u.b)((function(t){return{post:t.post.post,loading:t.post.loading,error:t.post.error}}),z)(Q),G=function(t){var e=t.postId;return a.a.createElement(W,{postId:e})};function K(){var t=Object(i.a)(["\n  text-align: center;\n"]);return K=function(){return t},t}var X=C.a.div(K()),Y=function(){return a.a.createElement(X,null,"Not Found")},Z=function(){return a.a.createElement(Y,null)};function $(){var t=Object(i.a)(["\n  display: flex;\n  justify-content: space-between\n"]);return $=function(){return t},t}function tt(){var t=Object(i.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  top: 20%;\n"]);return tt=function(){return t},t}function et(){var t=Object(i.a)(["\n  position: absolute;\n  display: ",";\n  justify-content: center;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(246,246,246,0.8);\n  z-index: 1; \n"]);return et=function(){return t},t}var nt=C.a.div(et(),(function(t){return t.isOpen?"flex":"none"})),rt=C.a.form(tt()),at=C.a.div($()),ot=function(t){function e(t){var n;return Object(p.a)(this,e),(n=Object(f.a)(this,Object(m.a)(e).call(this,t))).onTitleChange=function(t){n.setState({title:t.target.value})},n.onBodyChange=function(t){n.setState({body:t.target.value})},n.handleClose=function(){(0,n.props.closeFrom)()},n.onSubmit=function(t){t.preventDefault();var e=n.props,r=e.createPostSuccess,a=e.createPostError;n.props.post?v.update("/posts/".concat(n.state.id),Object(M.a)({},n.state)).catch((function(t){console.log(t)})):v.post("/posts",Object(M.a)({},n.state)).then((function(t){r(t)})).catch((function(t){a(t)})),n.setState(Object(M.a)({},n.default)),n.handleClose()},n.default={title:"",body:""},n.state=t.post||n.default,n}return Object(b.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this.state,e=t.title,n=t.body;return a.a.createElement(nt,{isOpen:!0},a.a.createElement(rt,{onSubmit:this.onSubmit},a.a.createElement("label",{htmlFor:"title"},"Title:"),a.a.createElement("input",{required:"",id:"title",type:"text",onChange:this.onTitleChange,placeholder:"title",value:e}),a.a.createElement("label",{htmlFor:"body"},"Body:"),a.a.createElement("input",{type:"text",placeholder:"body",id:"body",onChange:this.onBodyChange,value:n}),a.a.createElement(at,null,a.a.createElement("button",{type:"button",onClick:this.handleClose},"Close"),a.a.createElement("button",{type:"submit"},"Create"))))}}]),e}(a.a.Component),ct={createPostSuccess:function(t){return{type:"FETCH_CREATE_POST_SUCCESS",payload:t}},createPostError:function(t){return{type:"FETCH_CREATE_POST_FAILURE",payload:t}},closeFrom:function(){return{type:"FORM_HAS_CLOSED"}}},ut=Object(u.b)((function(t){return{isOpen:t.postForm.isOpen,post:t.postForm.post}}),ct)(ot);function st(){var t=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 900px;\n  margin: 0 auto;  \n"]);return st=function(){return t},t}var it=C.a.div(st()),lt=Object(u.b)((function(t){return{isOpen:t.postForm.isOpen}}))((function(t){return a.a.createElement(it,null,t.isOpen&&a.a.createElement(ut,null),a.a.createElement(l.d,null,a.a.createElement(l.a,{from:"/",to:"/posts",exact:!0}),a.a.createElement(l.b,{path:"/posts",component:L,exact:!0}),a.a.createElement(l.b,{path:"/posts/:id",component:function(t){var e=t.match.params.id;return a.a.createElement(G,{postId:e})}}),a.a.createElement(l.b,{component:Z})))})),pt=function(t){function e(){var t;return Object(p.a)(this,e),(t=Object(f.a)(this,Object(m.a)(e).call(this))).state={hasError:!1},t}return Object(b.a)(e,t),Object(d.a)(e,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?a.a.createElement(k,null):this.props.children}}]),e}(a.a.Component),dt=n(19),ft=n(37),mt=n(24),bt={posts:[],loading:!0,error:null},ht={post:{},loading:!0,error:null},Et={post:{},isOpen:!1},Ot=Object(dt.combineReducers)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"FETCH_POSTS_REQUEST":return Object(M.a)({},t,{posts:[],loading:!0,error:null});case"FETCH_POSTS_SUCCESS":return Object(M.a)({},t,{posts:r,loading:!1,error:null});case"FETCH_POSTS_FAILURE":return Object(M.a)({},t,{posts:[],loading:!1,error:r});case"FETCH_CREATE_POST_SUCCESS":return Object(M.a)({},t,{posts:[].concat(Object(mt.a)(t.posts),[r])});case"FETCH_CREATE_POST_FAILURE":default:return t}},post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"FETCH_POST_REQUEST":return Object(M.a)({},t,{post:{},loading:!0,error:null});case"FETCH_POST_SUCCESS":return Object(M.a)({},t,{post:r,loading:!1,error:null});case"FETCH_POST_FAILURE":return Object(M.a)({},t,{post:{},loading:!1,error:r});case"FETCH_UPDATE_SUCCESS":return Object(M.a)({},t,{post:r});case"FETCH_UPDATE_FAILURE":return Object(M.a)({},t,{error:r});case"COMMENT_SUCCESS":return Object(M.a)({},t,{post:Object(M.a)({},t.post,{comments:[].concat(Object(mt.a)(t.post.comments),[r])}),loading:!1,error:null});default:return t}},postForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"FORM_HAS_OPENED":return{post:r,isOpen:!0};case"FORM_HAS_CLOSED":return Object(M.a)({},Et);default:return t}}}),vt=Object(dt.createStore)(Ot,Object(ft.composeWithDevTools)());c.a.render(a.a.createElement(u.a,{store:vt},a.a.createElement(pt,null,a.a.createElement(s.a,null,a.a.createElement(lt,null)))),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.584737ea.chunk.js.map